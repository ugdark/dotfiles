---
name: d-magi
description: "MAGI判定 - 3つの視点（攻め/守り/バランス）から並列分析し多数決で結論を出す"
user-invocable: true
disable-model-invocation: true
allowed-tools: Read, Task
argument-hint: "[質問や検討事項]"
---

# MAGI判定システム

3つの異なる視点から並列に分析し、多数決で結論を導くシステム。

## 使用場面

`/d-magi [質問や検討事項]` で手動呼び出しのみ。

## 実行フロー

### Step 1: ペルソナ読み込み

3体のペルソナファイルを読み込む（並列で実行）：
- Read: このスキルの `personas/melchior.md`
- Read: このスキルの `personas/balthasar.md`
- Read: このスキルの `personas/caspar.md`

### Step 2: 3エージェント並列起動

`$ARGUMENTS` をユーザーの質問として、**Task ツールで3つのサブエージェントを同時に起動する**。

各エージェントへのプロンプトは以下の形式：

```
あなたは[ペルソナファイルの内容]です。

以下の質問・検討事項について、あなたの視点から分析してください。

## 質問
[ユーザーの質問]

## 回答形式
- まず結論（賛成/反対/条件付き賛成 など）を1行で
- 次にその理由・根拠を3-5行で
- 最後に推奨アクションを1-2行で
```

**重要**: 3つのTaskは必ず**並列（同一メッセージ内で同時に）** 起動すること。直列に実行しない。

### Step 3: 結果の集約と判定

3つのエージェントの回答を集約し、以下のフォーマットで出力する：

```
## MAGI判定

### MELCHIOR-1（攻め・理想主義）
[MELCHIORの分析結果]

### BALTHASAR-2（守り・安定運用）
[BALTHASARの分析結果]

### CASPAR-3（バランス・実用主義）
[CASPARの分析結果]

### 判定結果
[結論の集約: 例「推奨2:慎重1 → アプローチA採用」]
[少数意見への補足があれば記載]
```

## 重要ルール

- 3エージェントは必ず並列起動する（パフォーマンスのため）
- 各エージェントの subagent_type は `general-purpose` を使用
- 各エージェントの model は `haiku` を使用（コスト最適化）
- 結果集約時、少数意見の価値も必ず補足する
- `$ARGUMENTS` が空の場合は「何について判定しますか？」と聞く
